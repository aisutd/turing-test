<html>
	<head>
		<title>AIS Turing Test</title>
	
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		
		<script src="/socket.io/socket.io.js"></script>
		<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
		<script>		
			$(function () {
				var socket = io();
                
                socket.on('connect', function() {
                    //  Identify as operator
                    socket.emit('identify', 'operator');
                });

                socket.on('disconnect', function() {
                    $('#desc').html('Disconnected from server. Attempting to reconnect...');
                    $('#button-response').prop('disabled', true);
                });
				
				$('form').submit(function(){
				  socket.emit('message', $('#response-text').val());
				  $('#messages').append($('<li>').text('Human: ' + $('#response-text').val()));
					$('#response-text').val('');
				  return false;
				});
				
				socket.on('chat message', function(msg){
					
				});

                socket.on('message', function(messages){
                    let human_msg = messages.person;
                     
                    $('#messages').append($('<li>').text('Audience: ' + human_msg));
				});

                socket.on('status', function(s) {
                    if(typeof s.ready == 'boolean') {
                        $('#button-response').prop('disabled', !s.ready);
                    }
                    if(typeof s.message == 'string') {
                        $('#desc').html(s.message);
                    }
                });

                socket.on('reset', function() {
                     $('#messages').html('');
                });
			});
			
		</script>
	</head>
	<body>
		<div class="container-fluid">
			<div class="row">
				<div class="col-md-12">
					<h1>Artificial Intelligence Society: Turing Test</h1>
					<p id=desc>
						***DESCRIPTION***
					</p>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<h2>Conversation</h2>
					<ul id="messages"></ul>

					<h2>Response Input:</h2>
					
					<form action="">
						<textarea id="response-text" rows="3" cols="80"></textarea>
						<button id="button-response" class="btn btn-primary" disabled=true>Send</button>
					</form>
				</div>
			</div>
		</div>
	</body>
</html>


